
// Follow this setup guide to integrate the Deno runtime into your Supabase project:
// https://deno.land/manual/getting_started/introduction

import { serve } from "https://deno.land/std@0.177.0/http/server.ts";
import { createClient } from "https://esm.sh/@supabase/supabase-js@2.24.0";

interface RequestBody {
  vendorId: string;
}

serve(async (req: Request) => {
  try {
    // Create a Supabase client with Auth context
    const authHeader = req.headers.get("Authorization");
    if (!authHeader) {
      return new Response(
        JSON.stringify({ error: "Missing Authorization header" }),
        { status: 401, headers: { "Content-Type": "application/json" } }
      );
    }
    
    // Extract the JWT token
    const token = authHeader.replace("Bearer ", "");
    
    // Create a Supabase client with the token
    const supabaseClient = createClient(
      Deno.env.get("SUPABASE_URL") ?? "",
      Deno.env.get("SUPABASE_ANON_KEY") ?? "",
      { global: { headers: { Authorization: `Bearer ${token}` } } }
    );
    
    // Parse request body
    const { vendorId } = await req.json() as RequestBody;
    if (!vendorId) {
      return new Response(
        JSON.stringify({ error: "Missing vendor ID" }),
        { status: 400, headers: { "Content-Type": "application/json" } }
      );
    }

    // Get vendor information
    const { data: vendor, error: vendorError } = await supabaseClient
      .from("vendors")
      .select("company_name")
      .eq("id", vendorId)
      .single();
      
    if (vendorError) {
      return new Response(
        JSON.stringify({ error: "Failed to fetch vendor", details: vendorError }),
        { status: 404, headers: { "Content-Type": "application/json" } }
      );
    }
    
    // Simulate external API call to get a credit report
    // In a real application, this would be a call to a credit reporting service
    
    // For demo purposes, we'll generate a sample PDF file
    // In a real application, you'd get a real PDF from the API
    const samplePdfBase64 = "JVBERi0xLjcKJeLjz9MKNiAwIG9iago8PCAvVHlwZSAvUGFnZSAvUGFyZW50IDEgMCBSIC9MYXN0TW9kaWZpZWQgKEQ6MjAyMzA3MDExMDM0NTApIC9SZXNvdXJjZXMgMiAwIFIgL01lZGlhQm94IFswLjAwMDAwMCAwLjAwMDAwMCA1OTUuMjc2MDAwIDg0MS44OTAwMDBdIC9Dcm9wQm94IFswLjAwMDAwMCAwLjAwMDAwMCA1OTUuMjc2MDAwIDg0MS44OTAwMDBdIC9CbGVlZEJveCBbMC4wMDAwMDAgMC4wMDAwMDAgNTk1LjI3NjAwMCA4NDEuODkwMDAwXSAvVHJpbUJveCBbMC4wMDAwMDAgMC4wMDAwMDAgNTk1LjI3NjAwMCA4NDEuODkwMDAwXSAvQXJ0Qm94IFswLjAwMDAwMCAwLjAwMDAwMCA1OTUuMjc2MDAwIDg0MS44OTAwMDBdIC9Db250ZW50cyA3IDAgUiAvUm90YXRlIDAgL0dyb3VwIDw8IC9UeXBlIC9Hcm91cCAvUyAvVHJhbnNwYXJlbmN5IC9DUyAvRGV2aWNlUkdCID4+IC9Bbm5vdHMgWyA1IDAgUiBdIC9QWkEgMSA+PgovRW5kb2JqZWN0CjcgMCBvYmoKPDwvRmlsdGVyIC9GbGF0ZURlY29kZQovTGVuZ3RoIDE3Nj4+IHN0cmVhbQp4nJXPPQvCQAwF4L1/JStsIF6S3F3roOAkOHSRoyjWQVA7iP/fXlsH3QRf4Eny8ggyWCBNAtZ5mFxAWOdLBqRhYytP6PhEjbU0YUzL2AINUJFUJCWkVJJWpCFtSUfaK6JMmFJm/zDfPd9+/RvCPD+8q4/EfB6JubqiL6Xxnyr/ssf141W7vgHRYyXkCmVuZHN0cmVhbQplbmRvYmoKMSAwIG9iago8PCAvVHlwZSAvUGFnZXMgL0tpZHMgWyA2IDAgUiBdIC9Db3VudCAxID4+CmVuZG9iamVjdAozIDAgb2JqCjw8L1R5cGUgL0ZvbnQgL1N1YnR5cGUgL1R5cGUxIC9CYXNlRm9udCAvSGVsdmV0aWNhID4+CmVuZG9iamVjdAo0IDAgb2JqCjw8IC9UeXBlIC9YT2JqZWN0IC9TdWJ0eXBlIC9JbWFnZSAvV2lkdGggMTI4IC9IZWlnaHQgMTI4IC9Db2xvclNwYWNlIC9EZXZpY2VSR0IgL0JQQyA4IC9GaWx0ZXIgL0ZsYXRlRGVjb2RlIC9MZW5ndGggNjU5MSA+PgpzdHJlYW0KeJztnf17U8eVx+e/SZystAFsYzDBwQab/BKcULJLu0CbtN3dtkl54ba02e2WtnRbYN8UG5tsy5ZsY1myLC9/nDuzqmdGmrn3jjSSJXm+pzyGe+8dzTxz5nzPnDOaRO+98f0jr/3wxNmTZ8+c+vF3j/3w8HefeLLnySef/METTzz+/W9/58nHvvPYt771rW8++q1vfvORRx75+je+8eh/e+Tv/+G/P/L3//XvgsVI8GciWH8p+HMpwGskWA/eXBe+uTZ4czF8df7XV+dmfj0z9drVqe9Phf/9+5D/dsT/rxFfDdfgKVwJPdM5oq0RLRG1jeaItk6UnBkJmH59KlgPhb96/fJrE5e+dzH0nxKh/zhy/v/+/JdP//Dnp55+9j/+UwIgAUgAJAAJgAQgAUgAEoAEIAFIABKABCABSAASgAQgAUgAEoAEIAFIABKABCABSAASgAQgAUgAEoAEIAFIABKABCABSAASgAQgAUgAEoAEIAFIABKABCABSAASgAQgAUgAEoAEIAFIABKABCABSAASgAQgAUgAEoAEIAFIABKABCABSAASgAQgAUgAEoAEIAFIABKABCABSAASgAQgAUgAEoAEIAFIABKABCABSAASgAQgAUgAEoAEIAFIABKABCABSAASgAQgAUgAEoAEIAFIABKABCABSAASgAQgAUgAEoAEIAFIABKABCABSAASgAQgAUgAEoAEIAFIABKABCABSAASgAQgAUgAEoAEIAFIABKABCABSAASgAQgAUgAEoAEIAFIABKABCABSAASgAQgAUgAEoAEIAFIABKABCABSAD/txFqgXD46LOvHHvulZfZq/KfwedX0tcrz7166KnnDj33MkiVfA6vr/zk6MvPv/ryi8HAHHz++fzLr+Driy++8uKLwTYvvfTS4cOHDx06hA0OHHj+wP5g/cCB/fueC/4LtuNrr9kW+Myjbcbrp598+sknnnjisUce/ZdHvvGNf/zHR/TWhMAa0VpxeHhXXyw3OR+vTa/OrxLBNrPrxXsx5al3Pnrx/fu/eP/+/qPv9B95q33/W3tffGvPC4f3vHB4z/O/6T3wm97nf713/8t7fvz8niee3fXoU7u//Z+7vvVf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";
    
    // Create a filename for the report
    const dateStr = new Date().toISOString().split('T')[0];
    const filename = `credit_report_${vendor.company_name.replace(/\s+/g, '_')}_${dateStr}.pdf`;
    const filePath = `reports/${vendorId}/${filename}`;
    
    // Save to Supabase Storage
    const { error: storageError } = await supabaseClient.storage
      .from("reports")
      .upload(filePath, Uint8Array.from(atob(samplePdfBase64), c => c.charCodeAt(0)), {
        contentType: "application/pdf",
        cacheControl: "3600"
      });
      
    if (storageError) {
      return new Response(
        JSON.stringify({ error: "Failed to upload report", details: storageError }),
        { status: 500, headers: { "Content-Type": "application/json" } }
      );
    }
    
    // Create a record in the vendor_reports table
    const { error: reportError } = await supabaseClient
      .from("vendor_reports")
      .insert({
        vendor_id: vendorId,
        file_path: filePath
      });
      
    if (reportError) {
      return new Response(
        JSON.stringify({ error: "Failed to record report", details: reportError }),
        { status: 500, headers: { "Content-Type": "application/json" } }
      );
    }

    return new Response(
      JSON.stringify({ success: true, message: "Credit report fetched successfully" }),
      { headers: { "Content-Type": "application/json" } }
    );
  } catch (error) {
    return new Response(
      JSON.stringify({ error: error.message }),
      { status: 500, headers: { "Content-Type": "application/json" } }
    );
  }
});
